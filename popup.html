<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Max Extension Settings</title>
    <link rel="stylesheet" href="popup-page-style.css">
</head>

<body>
    <div class="container">
        <!-- Profile Section -->
        <section class="section">
            <h2>Profile</h2>
            <div class="row">
                <select id="profileSelect">
                    <option value="default">Default Profile</option>
                </select>
                <button id="addProfile">Add Profile</button>
                <button id="copyProfile">Duplicate Current Profile To A New One</button>
                <button id="deleteProfile" class="danger">Delete</button>
                <p id="topExplanationText">Your changes will be saved instantly. Reload website to apply.</p>
            </div>
            <!-- Add Profile Input and Save/Cancel Buttons -->
            <div id="addProfileContainer" class="profile-action-container" style="display: none;">
                <input type="text" id="addProfileInput" placeholder="Enter profile name here">
                <button id="saveAddProfile">Save</button>
                <button id="cancelAddProfile" class="danger">Cancel</button>
            </div>
            <!-- Copy Profile Input and Save/Cancel Buttons -->
            <div id="copyProfileContainer" class="profile-action-container" style="display: none;">
                <input type="text" id="copyProfileInput" placeholder="Enter new profile name here">
                <button id="saveCopyProfile">Save</button>
                <button id="cancelCopyProfile" class="danger">Cancel</button>
            </div>
        </section>

        <!-- Button Configuration (buttons are added dynamically) -->
        <section class="section">
            <h2>Button Configuration</h2>
            <div class="row">
                <input type="text" id="buttonIcon" placeholder="âœ¨" class="emoji-input">
                <textarea id="buttonText" placeholder="Button Template Text" class="text-input" rows="1"></textarea>
                <label class="checkbox-row">
                    <input type="checkbox" id="buttonAutoSendToggle" checked>
                    <span>Auto-send</span>
                </label>
            </div>
            <div class="row">
                <button id="addButton">Add Button</button>
                <button id="addSeparator">Add Separator</button>
            </div>
            <div id="buttonList" data-draggable="true">
                <!-- Buttons added dynamically -->
            </div>
        </section>

        <!-- Settings -->
        <section class="section">
            <h2>Settings</h2>
            <label class="checkbox-row">
                <input type="checkbox" id="autoSendToggle">
                <span>Enable Global Auto-send for profile. Disabling will disable auto-send everywhere.</span>
            </label>
            <label class="checkbox-row">
                <input type="checkbox" id="shortcutsToggle">
                <span>Enable Keyboard Shortcuts</span>
            </label>
            <button id="revertDefault" class="danger">Revert Current Profile to Default</button>
        </section>

        <!-- Console -->
        <section class="section">
            <h2>Console</h2>
            <div id="console" class="console"></div>
        </section>

        <div id="saveStatus" class="save-status">Last saved: Never</div>

        <!-- Backup Section -->
        <section class="section">
            <h2>Backup & Restore</h2>
            <div class="row">
                <button id="exportProfile">Export Profile</button>
                <button id="importProfile">Import Profile</button>
                <!-- Hidden file input for importing profile -->
                <input type="file" id="importFileInput" accept="application/json" style="display: none;">
            </div>
            <!-- Confirmation Div -->
            <div id="confirmationDiv" class="confirmation" style="display: none;">
                <p>File loaded successfully. Do you want to overwrite current profile?</p>
                <button id="confirmOverwrite">Yes</button>
                <button id="cancelOverwrite">No</button>
            </div>
            <!-- Error Message Div -->
            <div id="errorDiv" class="error" style="display: none;">
                <p>Error loading file. Please ensure the file is a valid JSON profile.</p>
            </div>
        </section>
    </div>
    <script src="log.js"></script>
    
    <script src="/popup-page-scripts/popup-page-visuals.js"></script>
    <script src="/popup-page-scripts/popup-page-profiles.js"></script>    
    <script src="/popup-page-scripts/popup-page-backup-handler.js"></script>
    <script src="/popup-page-scripts/popup-page-script.js"></script>
    <!-- Toast Notification Container -->
    <div id="toastContainer" class="toast-container"></div>
</body>

</html>
